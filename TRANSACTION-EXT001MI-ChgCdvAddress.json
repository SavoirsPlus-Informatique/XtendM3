{"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"ChgCdvAddress":{"sourceUuid":"4d64b8da-9065-4eb0-a933-a69cce9a1bba","name":"ChgCdvAddress","program":"EXT001MI","description":"Modification de l'adresse d'une commande de vente","active":true,"multi":false,"modified":1706610251289,"modifiedBy":"FRALEP","outputFields":[],"inputFields":[{"name":"ORNO","description":"Customer order number","length":10,"mandatory":true,"type":"A"},{"name":"ADRT","description":"Address type","length":2,"mandatory":true,"type":"N"},{"name":"ADID","description":"Address number","length":6,"mandatory":false,"type":"A"},{"name":"CUNM","description":"Name","length":36,"mandatory":false,"type":"A"},{"name":"CUA1","description":"Address line 1","length":36,"mandatory":false,"type":"A"},{"name":"CUA2","description":"Address line 2","length":36,"mandatory":false,"type":"A"},{"name":"CUA3","description":"Address line 3","length":36,"mandatory":false,"type":"A"},{"name":"PONO","description":"Postal code","length":10,"mandatory":false,"type":"A"},{"name":"TOWN","description":"City","length":20,"mandatory":false,"type":"A"},{"name":"ECAR","description":"State","length":2,"mandatory":false,"type":"A"},{"name":"CSCD","description":"Country","length":3,"mandatory":false,"type":"A"},{"name":"PHNO","description":"Telephone number 1","length":16,"mandatory":false,"type":"A"},{"name":"TFNO","description":"Facsimile transmission number","length":16,"mandatory":false,"type":"A"},{"name":"YREF","description":"Your reference 1","length":30,"mandatory":false,"type":"A"},{"name":"VRNO","description":"VAT registration number","length":16,"mandatory":false,"type":"A"},{"name":"SPLE","description":"Standard point location code","length":10,"mandatory":false,"type":"A"},{"name":"HAFE","description":"Harbor or airport","length":6,"mandatory":false,"type":"A"},{"name":"RASN","description":"Rail station","length":10,"mandatory":false,"type":"A"},{"name":"EDES","description":"Place","length":10,"mandatory":false,"type":"A"},{"name":"DLSP","description":"Delivery specification","length":12,"mandatory":false,"type":"A"},{"name":"DSTX","description":"Description","length":36,"mandatory":false,"type":"A"},{"name":"MODL","description":"Delivery method","length":3,"mandatory":false,"type":"A"},{"name":"TEDL","description":"Delivery terms","length":3,"mandatory":false,"type":"A"},{"name":"TEL2","description":"Terms text","length":36,"mandatory":false,"type":"A"}],"utilities":["DateUtil","NumberUtil"]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"4d64b8da-9065-4eb0-a933-a69cce9a1bba":{"uuid":"4d64b8da-9065-4eb0-a933-a69cce9a1bba","updated":1714654985325,"updatedBy":"FRALEP","created":1706541317584,"createdBy":"FRALEP","apiVersion":"0.9","beVersion":"16.0.0.20240221054708.9","language":"GROOVY","codeHash":"FAF0495615C0F2956A3EB95826CDF95A111DCFDAEE65084C2B7B7E30E1BE1DD7","code":"LyoqDQogKiBSRUFETUUNCiAqIENyw6lhdGlvbiBkJ3VuZSBBUEkgcG91ciBtZXR0cmUgw6Agam91ciBsJ2FkcmVzc2UgZCd1bmUgY29tbWFuZGUgZGUgdmVudGUuIE9uIGJsb3F1ZXJhIGxhIG1vZGlmaWNhdGlvbiBzaSBsZSBzdGF0dXQgZXN0ID49IDc3IChmYWN0dXLDqSkuDQogKg0KICogTmFtZTogQ2hnQ2R2QWRkcmVzcw0KICogRGVzY3JpcHRpb246IA0KICogRGF0ZSAgICAgICBDaGFuZ2VkIEJ5ICAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24NCiAqIDIwMjQwMTI5ICAgRnJhbsOnb2lzIExlcHLDqXZvc3QgICAgICAgICAgICAgQ3LDqWF0aW9uIHZlcmJlIENoZ0NkdkFkZHJlc3MNCiAqIDIwMjQwNDI5ICAgRnJhbsOnb2lzIExlcHLDqXZvc3QgICAgICAgICAgICAgQ29ycmVjdGlvbiB2ZXJiZSBDaGdDZHZBZGRyZXNzDQogKi8NCnB1YmxpYyBjbGFzcyBDaGdDZHZBZGRyZXNzIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7DQogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkNCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQ0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbQ0KICBwcml2YXRlIGZpbmFsIFV0aWxpdHlBUEkgdXRpbGl0eQ0KICANCiAgcHVibGljIENoZ0NkdkFkZHJlc3MoTUlBUEkgbWksIERhdGFiYXNlQVBJIGRhdGFiYXNlICwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBNSUNhbGxlckFQSSBtaUNhbGxlciwgVXRpbGl0eUFQSSB1dGlsaXR5KSB7DQogICAgdGhpcy5taSA9IG1pDQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlDQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQ0KICAgIHRoaXMudXRpbGl0eSA9IHV0aWxpdHkNCiAgfQ0KICANCiAgaW50IGNvbm8gPSAwDQogIFN0cmluZyBjaGlkID0gIiINCiAgU3RyaW5nIGN1bm8gPSAiIg0KICBNYXA8U3RyaW5nLCBTdHJpbmc+IG1hcCA9IG5ldyBIYXNoTWFwPFN0cmluZywgU3RyaW5nPigpDQogIFN0cmluZyBvcm5vID0gIiINCiAgU3RyaW5nIGFkaWRPT0hFQUQgPSAiIg0KICANCiAgcHVibGljIHZvaWQgbWFpbigpIHsNCiAgICBjb25vID0gKEludGVnZXIpIHByb2dyYW0uZ2V0TERBWkQoKS5DT05PDQogICAgY2hpZCA9IHByb2dyYW0uZ2V0VXNlcigpDQogICAgDQogICAgb3JubyA9IChtaS5pbkRhdGEuZ2V0KCJPUk5PIikgPT0gbnVsbCkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk9STk8iKS50cmltKCkNCiAgICBpZiAob3Juby5pc0VtcHR5KCkpIHsNCiAgICAgIG1pLmVycm9yKCJMZSBudW3DqXJvIGRlIGNvbW1hbmRlIGVzdCBvYmxpZ2F0b2lyZS4iKQ0KICAgICAgcmV0dXJuDQogICAgfSBlbHNlIHsNCiAgICAgIE9wdGlvbmFsPERCQ29udGFpbmVyPiBjb250YWluZXIgPSBjaGVja09yZGVyRXhpc3Qob3JubykNCiAgICAgIGlmIChjb250YWluZXIuaXNQcmVzZW50KCkpIHsNCiAgICAgICAgREJDb250YWluZXIgcmVjb3JkID0gY29udGFpbmVyLmdldCgpDQogICAgICAgIGludCBvcnNsID0gSW50ZWdlci5wYXJzZUludChTdHJpbmcudmFsdWVPZihyZWNvcmQuZ2V0KCJPQU9SU0wiKSkpDQogICAgICAgIGludCBvcnN0ID0gSW50ZWdlci5wYXJzZUludChTdHJpbmcudmFsdWVPZihyZWNvcmQuZ2V0KCJPQU9SU1QiKSkpDQogICAgICAgIGlmIChvcnNsID49IDc3IHx8IG9yc3QgPj0gNzcpIHsNCiAgICAgICAgICBtaS5lcnJvcigiTGEgY29tbWFuZGUgZXN0IGZhY3R1csOpZSwgbCdhZHJlc3NlIG5lIHBldXQgw6p0cmUgbW9kaWZpw6llLiIpDQogICAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCiAgICAgICAgaW50IGhvY2QgPSBJbnRlZ2VyLnBhcnNlSW50KFN0cmluZy52YWx1ZU9mKHJlY29yZC5nZXQoIk9BSE9DRCIpKSkNCiAgICAgICAgaWYgKGhvY2QgPiAwKSB7DQogICAgICAgICAgU3RyaW5nIG1lc3NhZ2UgPSAiTGEgY29tbWFuZGUgZXN0IHZlcnJvdWlsbMOpZSBwYXIgbCd1dGlsaXNhdGV1ciAiICsgcmVjb3JkLmdldCgiT0FDSElEIikgKyAiLCBsYSBtb2RpZmljYXRpb24gZXN0IGltcG9zc2libGUuIg0KICAgICAgICAgIG1pLmVycm9yKG1lc3NhZ2UpDQogICAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCiAgICAgICAgY3VubyA9IFN0cmluZy52YWx1ZU9mKHJlY29yZC5nZXQoIk9BQ1VOTyIpKQ0KICAgICAgICBhZGlkT09IRUFEID0gU3RyaW5nLnZhbHVlT2YocmVjb3JkLmdldCgiT0FBRElEIikpDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiTGEgY29tbWFuZGUgZXN0IGluZXhpc3RhbnRlLiIpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgICBTdHJpbmcgYWRydCA9IChtaS5pbkRhdGEuZ2V0KCJBRFJUIikgPT0gbnVsbCkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkFEUlQiKS50cmltKCkNCiAgICBpZiAoYWRydC5pc0VtcHR5KCkpIHsNCiAgICAgIG1pLmVycm9yKCJMZSB0eXBlIGQnYWRyZXNzZSBlc3Qgb2JsaWdhdG9pcmUuIikNCiAgICAgIHJldHVybg0KICAgIH0gZWxzZSBpZiAoIXV0aWxpdHkuY2FsbCgiTnVtYmVyVXRpbCIsImlzVmFsaWROdW1iZXIiLCBhZHJ0LCAiLiIpKSB7DQogICAgICBtaS5lcnJvcigiTGUgdHlwZSBkZSBjb21tYW5kZSBlc3QgaW5jb3JyZWN0LiIpDQogICAgICByZXR1cm4NCiAgICB9DQogICAgICANCiAgICBTdHJpbmcgY3NjZCA9IChtaS5pbkRhdGEuZ2V0KCJDU0NEIikgPT0gbnVsbCkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkNTQ0QiKS50cmltKCkNCiAgICBpZiAoIWNzY2QuaXNFbXB0eSgpICYmICFjaGVja0NzeXRhYkV4aXN0KCJDU0NEIiwgY3NjZCwgIiIpKSB7DQogICAgICBtaS5lcnJvcigiTGUgcGF5cyBuJ2V4aXN0ZSBwYXMiKQ0KICAgICAgcmV0dXJuDQogICAgfQ0KICAgIA0KICAgIFN0cmluZyBtb2RsID0gKG1pLmluRGF0YS5nZXQoIk1PREwiKSA9PSBudWxsKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiTU9ETCIpLnRyaW0oKQ0KICAgIGlmICghbW9kbC5pc0VtcHR5KCkgJiYgIWNoZWNrQ3N5dGFiRXhpc3QoIk1PREwiLCBtb2RsLCAiRlIiKSkgew0KICAgICAgaWYgKCFjaGVja0NzeXRhYkV4aXN0KCJNT0RMIiwgbW9kbCwgIkZSIikpIHsNCiAgICAgICAgbWkuZXJyb3IoIkxlIG1vZGUgZGUgbGl2cmFpc29uIG4nZXhpc3RlIHBhcyIpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgICBTdHJpbmcgdGVkbCA9IChtaS5pbkRhdGEuZ2V0KCJURURMIikgPT0gbnVsbCkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlRFREwiKS50cmltKCkNCiAgICBpZiAoIXRlZGwuaXNFbXB0eSgpICYmICFjaGVja0NzeXRhYkV4aXN0KCJURURMIiwgdGVkbCwgIkZSIikpIHsNCiAgICAgIGlmICghY2hlY2tDc3l0YWJFeGlzdCgiVEVETCIsIHRlZGwsICIiKSkgew0KICAgICAgICBtaS5lcnJvcigiTGVzIGNvbmRpdGlvbnMgZGUgbGl2cmFpc29uIG4nZXhpc3RlbnQgcGFzIikNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgfQ0KICAgIA0KICAgIFN0cmluZyBhZGlkID0gKG1pLmluRGF0YS5nZXQoIkFESUQiKSA9PSBudWxsKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQURJRCIpLnRyaW0oKQ0KICAgIGlmIChhZGlkLmlzRW1wdHkoKSAmJiBhZHJ0LmVxdWFscygiMSIpKSB7DQogICAgICAgIG1pLmVycm9yKCJMZSBjb2RlIGFkcmVzc2UgZXN0IG9ibGlnYXRvaXJlIHBvdXIgbCdhZHJlc3NlIGRlIGxpdnJhaXNvbiAoQURSVCA9IDEpIikNCiAgICAgICAgcmV0dXJuDQogICAgfQ0KICAgIA0KICAgIGFsaW1NYXAoY3NjZCkNCiAgICB1cGRhdGVBZGRyZXNzKG9ybm8sIGFkcnQpDQogIH0NCiAgDQogIC8qKg0KICAqIE9uIGVucmVnaXN0cmUgZGFucyBsYSBIYXNoTWFwIGxlcyBkb25uw6llcyBlbiBlbnRyw6llIGRlIGwnQVBJLg0KICAqLw0KICBwcml2YXRlIGFsaW1NYXAoU3RyaW5nIGNzY2QpIHsNCiAgICBTdHJpbmcgYWRpZCA9IChtaS5pbkRhdGEuZ2V0KCJBRElEIikgPT0gbnVsbCkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkFESUQiKS50cmltKCkNCiAgICBTdHJpbmcgY3VubSA9IChtaS5pbkRhdGEuZ2V0KCJDVU5NIikgPT0gbnVsbCkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkNVTk0iKS50cmltKCkNCiAgICBTdHJpbmcgY3VhMSA9IChtaS5pbkRhdGEuZ2V0KCJDVUExIikgPT0gbnVsbCkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkNVQTEiKS50cmltKCkNCiAgICBTdHJpbmcgY3VhMiA9IChtaS5pbkRhdGEuZ2V0KCJDVUEyIikgPT0gbnVsbCkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkNVQTIiKS50cmltKCkNCiAgICBTdHJpbmcgY3VhMyA9IChtaS5pbkRhdGEuZ2V0KCJDVUEzIikgPT0gbnVsbCkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkNVQTMiKS50cmltKCkNCiAgICBTdHJpbmcgcG9ubyA9IChtaS5pbkRhdGEuZ2V0KCJQT05PIikgPT0gbnVsbCkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlBPTk8iKS50cmltKCkNCiAgICBTdHJpbmcgdG93biA9IChtaS5pbkRhdGEuZ2V0KCJUT1dOIikgPT0gbnVsbCkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlRPV04iKS50cmltKCkNCiAgICBTdHJpbmcgY3VhNCA9IHBvbm8gKyAiICIgKyB0b3duDQogICAgU3RyaW5nIGVjYXIgPSAobWkuaW5EYXRhLmdldCgiRUNBUiIpID09IG51bGwpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJFQ0FSIikudHJpbSgpDQogICAgU3RyaW5nIHBobm8gPSAobWkuaW5EYXRhLmdldCgiUEhOTyIpID09IG51bGwpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJQSE5PIikudHJpbSgpDQogICAgU3RyaW5nIHRmbm8gPSAobWkuaW5EYXRhLmdldCgiVEZOTyIpID09IG51bGwpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJURk5PIikudHJpbSgpDQogICAgU3RyaW5nIHlyZWYgPSAobWkuaW5EYXRhLmdldCgiWVJFRiIpID09IG51bGwpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJZUkVGIikudHJpbSgpDQogICAgU3RyaW5nIHZybm8gPSAobWkuaW5EYXRhLmdldCgiVlJOTyIpID09IG51bGwpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJWUk5PIikudHJpbSgpDQogICAgU3RyaW5nIHNwbGUgPSAobWkuaW5EYXRhLmdldCgiU1BMRSIpID09IG51bGwpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJTUExFIikudHJpbSgpDQogICAgU3RyaW5nIGhhZmUgPSAobWkuaW5EYXRhLmdldCgiSEFGRSIpID09IG51bGwpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJIQUZFIikudHJpbSgpDQogICAgU3RyaW5nIHJhc24gPSAobWkuaW5EYXRhLmdldCgiUkFTTiIpID09IG51bGwpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJSQVNOIikudHJpbSgpDQogICAgU3RyaW5nIGVkZXMgPSAobWkuaW5EYXRhLmdldCgiRURFUyIpID09IG51bGwpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJFREVTIikudHJpbSgpDQogICAgU3RyaW5nIGRsc3AgPSAobWkuaW5EYXRhLmdldCgiRExTUCIpID09IG51bGwpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJETFNQIikudHJpbSgpDQogICAgU3RyaW5nIGRzdHggPSAobWkuaW5EYXRhLmdldCgiRFNUWCIpID09IG51bGwpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJEU1RYIikudHJpbSgpDQogICAgU3RyaW5nIG1vZGwgPSAobWkuaW5EYXRhLmdldCgiTU9ETCIpID09IG51bGwpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJNT0RMIikudHJpbSgpDQogICAgU3RyaW5nIHRlZGwgPSAobWkuaW5EYXRhLmdldCgiVEVETCIpID09IG51bGwpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJURURMIikudHJpbSgpDQogICAgU3RyaW5nIHRlbDIgPSAobWkuaW5EYXRhLmdldCgiVEVMMiIpID09IG51bGwpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJURUwyIikudHJpbSgpDQogICAgDQogICAgbWFwLnB1dCgiYWRpZCIsIGFkaWQpDQogICAgbWFwLnB1dCgiY3VubSIsIGN1bm0pDQogICAgbWFwLnB1dCgiY3VhMSIsIGN1YTEpDQogICAgbWFwLnB1dCgiY3VhMiIsIGN1YTIpDQogICAgbWFwLnB1dCgiY3VhMyIsIGN1YTMpDQogICAgbWFwLnB1dCgicG9ubyIsIHBvbm8pDQogICAgbWFwLnB1dCgidG93biIsIHRvd24pDQogICAgbWFwLnB1dCgiY3VhNCIsIGN1YTQpDQogICAgbWFwLnB1dCgiZWNhciIsIGVjYXIpDQogICAgbWFwLnB1dCgicGhubyIsIHBobm8pDQogICAgbWFwLnB1dCgidGZubyIsIHRmbm8pDQogICAgbWFwLnB1dCgieXJlZiIsIHlyZWYpDQogICAgbWFwLnB1dCgidnJubyIsIHZybm8pDQogICAgbWFwLnB1dCgic3BsZSIsIHNwbGUpDQogICAgbWFwLnB1dCgiY3NjZCIsIGNzY2QpDQogICAgbWFwLnB1dCgiaGFmZSIsIGhhZmUpDQogICAgbWFwLnB1dCgicmFzbiIsIHJhc24pDQogICAgbWFwLnB1dCgiZWRlcyIsIGVkZXMpDQogICAgbWFwLnB1dCgiZGxzcCIsIGRsc3ApDQogICAgbWFwLnB1dCgiZHN0eCIsIGRzdHgpDQogICAgbWFwLnB1dCgibW9kbCIsIG1vZGwpDQogICAgbWFwLnB1dCgidGVkbCIsIHRlZGwpDQogICAgbWFwLnB1dCgidGVsMiIsIHRlbDIpDQogIH0NCiAgDQogIC8qKg0KICAqIE9uIHbDqXJpZmllIHF1ZSBsZSBudW3DqXJvIGRlIGNvbW1hbmRlIGV4aXN0ZSBldCBvbiByw6ljdXDDqHJlIGxlcyBjZXJ0YWluZXMgZG9ubsOpZXMgZGUgbGEgdGFibGUuDQogICovDQogIHByaXZhdGUgT3B0aW9uYWw8REJDb250YWluZXI+IGNoZWNrT3JkZXJFeGlzdChTdHJpbmcgb3Jubykgew0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk9PSEVBRCIpDQogICAgICAuaW5kZXgoIjAwIikNCiAgICAgIC5zZWxlY3Rpb24oIk9BT1JTTCIsICJPQU9SU1QiLCAiT0FIT0NEIiwgIk9BQ1VOTyIpDQogICAgICAuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgY29udGFpbmVyLnNldCgiT0FDT05PIiwgY29ubykNCiAgICBjb250YWluZXIuc2V0KCJPQU9STk8iLCBvcm5vKQ0KICAgIA0KICAgIGJvb2xlYW4gZm91bmQgPSBxdWVyeS5yZWFkKGNvbnRhaW5lcikNCiAgICANCiAgICBpZiAoZm91bmQpIHsNCiAgICAgIHJldHVybiBPcHRpb25hbC5vZihjb250YWluZXIpDQogICAgfSBlbHNlIHsNCiAgICAgIHJldHVybiBPcHRpb25hbC5lbXB0eSgpDQogICAgfQ0KICB9DQogIA0KICAvKioNCiAgKiBPbiB2w6lyaWZpZSBxdWUgbGVzIGVucmVnaXN0cmVtZW50cyBkZSBDU1lUQUIgZXhpc3RlbnQuDQogICovDQogIHByaXZhdGUgYm9vbGVhbiBjaGVja0NzeXRhYkV4aXN0KFN0cmluZyBzdGNvLCBTdHJpbmcgc3RreSwgU3RyaW5nIGxuY2QpIHsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJDU1lUQUIiKQ0KICAgICAgLmluZGV4KCIwMCIpDQogICAgICAuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgY29udGFpbmVyLnNldCgiQ1RDT05PIiwgY29ubykNCiAgICBjb250YWluZXIuc2V0KCJDVERJVkkiLCAiIikNCiAgICBjb250YWluZXIuc2V0KCJDVFNUQ08iLCBzdGNvKQ0KICAgIGNvbnRhaW5lci5zZXQoIkNUU1RLWSIsIHN0a3kpDQogICAgY29udGFpbmVyLnNldCgiQ1RMTkNEIiwgbG5jZCkNCiAgICANCiAgICByZXR1cm4gcXVlcnkucmVhZChjb250YWluZXIpDQogIH0NCiAgDQogIC8qKg0KICAqIE1vZGlmaWNhdGlvbiBkZSBsJ2FkcmVzc2UsIHNpIG9uIG5lIGxhIHRyb3V2ZSBwYXMgb24gbGEgY3LDqWUuDQogICovDQogIHByaXZhdGUgdm9pZCB1cGRhdGVBZGRyZXNzKFN0cmluZyBvcm5vLCBTdHJpbmcgYWRydCkgew0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk9PQURSRSIpDQogICAgICAuaW5kZXgoIjAwIikNCiAgICAgIC5idWlsZCgpDQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkNCiAgICBjb250YWluZXIuc2V0KCJPRENPTk8iLCBjb25vKQ0KICAgIGNvbnRhaW5lci5zZXQoIk9ET1JOTyIsIG9ybm8pDQogICAgY29udGFpbmVyLnNldCgiT0RBRFJUIiwgdXRpbGl0eS5jYWxsKCJOdW1iZXJVdGlsIiwicGFyc2VTdHJpbmdUb0ludGVnZXIiLCBhZHJ0KSkNCiAgICBjb250YWluZXIuc2V0KCJPREFESUQiLCBtYXAuZ2V0KCJhZGlkIikpDQogICAgDQogICAgQ2xvc3VyZTw/PiB1cGRhdGVDYWxsQmFjayA9IHsgTG9ja2VkUmVzdWx0IGxvY2tlZFJlc3VsdCAtPg0KICAgICAgaWYgKCFtYXAuZ2V0KCJjdW5tIikuaXNFbXB0eSgpKSB7DQogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIk9EQ1VOTSIsIG1hcC5nZXQoImN1bm0iKSkNCiAgICAgIH0NCiAgICAgIGlmICghbWFwLmdldCgiY3VhMSIpLmlzRW1wdHkoKSkgew0KICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPRENVQTEiLCBtYXAuZ2V0KCJjdWExIikpDQogICAgICB9DQogICAgICBpZiAoIW1hcC5nZXQoImN1YTIiKS5pc0VtcHR5KCkpIHsNCiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0RDVUEyIiwgbWFwLmdldCgiY3VhMiIpKQ0KICAgICAgfQ0KICAgICAgaWYgKCFtYXAuZ2V0KCJjdWEzIikuaXNFbXB0eSgpKSB7DQogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIk9EQ1VBMyIsIG1hcC5nZXQoImN1YTMiKSkNCiAgICAgIH0NCiAgICAgIGlmICghbWFwLmdldCgiY3VhNCIpLmlzRW1wdHkoKSkgew0KICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPRENVQTQiLCBtYXAuZ2V0KCJjdWE0IikpDQogICAgICB9DQogICAgICBpZiAoIW1hcC5nZXQoInBvbm8iKS5pc0VtcHR5KCkpIHsNCiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0RQT05PIiwgbWFwLmdldCgicG9ubyIpKQ0KICAgICAgfQ0KICAgICAgaWYgKCFtYXAuZ2V0KCJ0b3duIikuaXNFbXB0eSgpKSB7DQogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIk9EVE9XTiIsIG1hcC5nZXQoInRvd24iKSkNCiAgICAgIH0NCiAgICAgIGlmICghbWFwLmdldCgiZWNhciIpLmlzRW1wdHkoKSkgew0KICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPREVDQVIiLCBtYXAuZ2V0KCJlY2FyIikpDQogICAgICB9DQogICAgICBpZiAoIW1hcC5nZXQoImNzY2QiKS5pc0VtcHR5KCkpIHsNCiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0RDU0NEIiwgbWFwLmdldCgiY3NjZCIpKQ0KICAgICAgfQ0KICAgICAgaWYgKCFtYXAuZ2V0KCJwaG5vIikuaXNFbXB0eSgpKSB7DQogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIk9EUEhOTyIsIG1hcC5nZXQoInBobm8iKSkNCiAgICAgIH0NCiAgICAgIGlmICghbWFwLmdldCgidGZubyIpLmlzRW1wdHkoKSkgew0KICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPRFRGTk8iLCBtYXAuZ2V0KCJ0Zm5vIikpDQogICAgICB9DQogICAgICBpZiAoIW1hcC5nZXQoInlyZWYiKS5pc0VtcHR5KCkpIHsNCiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0RZUkVGIiwgbWFwLmdldCgieXJlZiIpKQ0KICAgICAgfQ0KICAgICAgaWYgKCFtYXAuZ2V0KCJ2cm5vIikuaXNFbXB0eSgpKSB7DQogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIk9EVlJOTyIsIG1hcC5nZXQoInZybm8iKSkNCiAgICAgIH0NCiAgICAgIGlmICghbWFwLmdldCgic3BsZSIpLmlzRW1wdHkoKSkgew0KICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPRFNQTEUiLCBtYXAuZ2V0KCJzcGxlIikpDQogICAgICB9DQogICAgICBpZiAoIW1hcC5nZXQoImNzY2QiKS5pc0VtcHR5KCkpIHsNCiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0RDU0NEIiwgbWFwLmdldCgiY3NjZCIpKQ0KICAgICAgfQ0KICAgICAgaWYgKCFtYXAuZ2V0KCJoYWZlIikuaXNFbXB0eSgpKSB7DQogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIk9ESEFGRSIsIG1hcC5nZXQoImhhZmUiKSkNCiAgICAgIH0NCiAgICAgIGlmICghbWFwLmdldCgicmFzbiIpLmlzRW1wdHkoKSkgew0KICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPRFJBU04iLCBtYXAuZ2V0KCJyYXNuIikpDQogICAgICB9ICAgICAgDQogICAgICBpZiAoIW1hcC5nZXQoImVkZXMiKS5pc0VtcHR5KCkpIHsNCiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0RFREVTIiwgbWFwLmdldCgiZWRlcyIpKQ0KICAgICAgfQ0KICAgICAgaWYgKCFtYXAuZ2V0KCJkbHNwIikuaXNFbXB0eSgpKSB7DQogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIk9ERExTUCIsIG1hcC5nZXQoImRsc3AiKSkNCiAgICAgIH0gICAgIA0KICAgICAgaWYgKCFtYXAuZ2V0KCJkc3R4IikuaXNFbXB0eSgpKSB7DQogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIk9ERFNUWCIsIG1hcC5nZXQoImRzdHgiKSkNCiAgICAgIH0NCiAgICAgIGlmICghbWFwLmdldCgibW9kbCIpLmlzRW1wdHkoKSkgew0KICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPRE1PREwiLCBtYXAuZ2V0KCJtb2RsIikpDQogICAgICB9DQogICAgICBpZiAoIW1hcC5nZXQoInRlZGwiKS5pc0VtcHR5KCkpIHsNCiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0RURURMIiwgbWFwLmdldCgidGVkbCIpKQ0KICAgICAgfQ0KICAgICAgaWYgKCFtYXAuZ2V0KCJ0ZWwyIikuaXNFbXB0eSgpKSB7DQogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIk9EVEVMMiIsIG1hcC5nZXQoInRlbDIiKSkNCiAgICAgIH0NCiAgICAgIGludCBjaG5vID0gbG9ja2VkUmVzdWx0LmdldCgiT0RDSE5PIikNCiAgICAgIGNobm8rKw0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0RMTURUIiwgdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsImN1cnJlbnREYXRlWThBc0ludCIpKQ0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0RDSE5PIiwgY2hubykNCiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIk9EQ0hJRCIsIGNoaWQpDQogICAgICANCiAgICAgIGxvY2tlZFJlc3VsdC51cGRhdGUoKQ0KICAgIH0NCiAgICANCiAgICBpZiAoIXF1ZXJ5LnJlYWRMb2NrKGNvbnRhaW5lciwgdXBkYXRlQ2FsbEJhY2spKSB7DQogICAgICBjcmVhdGVBZGRyZXNzKG9ybm8sIGFkcnQpDQogICAgfQ0KICAgIA0KICAgIGlmIChhZHJ0LmVxdWFscygiMSIpKSB7DQogICAgICB1cGRhdEFkaWRJbk9PSEVBRCgpDQogICAgfQ0KICB9DQogIA0KICAvKioNCiAgKiBDcsOpYXRpb24gZGUgbCdhZHJlc3NlIGRhbnMgT09BRFJFLg0KICAqLw0KICBwcml2YXRlIHZvaWQgY3JlYXRlQWRkcmVzcyhTdHJpbmcgb3JubywgU3RyaW5nIGFkcnQpIHsNCiAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiT09BRFJFIikNCiAgICAgIC5pbmRleCgiMDAiKQ0KICAgICAgLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgIGNvbnRhaW5lci5zZXQoIk9EQ09OTyIsIGNvbm8pDQogICAgY29udGFpbmVyLnNldCgiT0RPUk5PIiwgb3JubykNCiAgICBjb250YWluZXIuc2V0KCJPREFEUlQiLCB1dGlsaXR5LmNhbGwoIk51bWJlclV0aWwiLCJwYXJzZVN0cmluZ1RvSW50ZWdlciIsIGFkcnQpKQ0KICAgIGNvbnRhaW5lci5zZXQoIk9EQURJRCIsIG1hcC5nZXQoImFkaWQiKSkNCiAgICANCiAgICBPcHRpb25hbDxEQkNvbnRhaW5lcj4gY3VzdG9tZXJDb250YWluZXIgPSBzZWFyY2hDdXN0b21lckFkZHJlc3MoYWRydCkNCiAgICBib29sZWFuIGNpZG1hc0V4aXN0ID0gZmFsc2UNCiAgICBEQkNvbnRhaW5lciByZWNvcmQgPSBudWxsDQogICAgaWYgKGN1c3RvbWVyQ29udGFpbmVyLmlzUHJlc2VudCgpKSB7DQogICAgICBjaWRtYXNFeGlzdCA9IHRydWUNCiAgICAgIHJlY29yZCA9IGN1c3RvbWVyQ29udGFpbmVyLmdldCgpDQogICAgfQ0KICAgIA0KICAgIGlmICghbWFwLmdldCgiY3VubSIpLmlzRW1wdHkoKSkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0RDVU5NIiwgbWFwLmdldCgiY3VubSIpKQ0KICAgIH0gZWxzZSBpZiAoY2lkbWFzRXhpc3QpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9EQ1VOTSIsIFN0cmluZy52YWx1ZU9mKHJlY29yZC5nZXQoIk9QQ1VOTSIpKSkNCiAgICB9DQogICAgaWYgKCFtYXAuZ2V0KCJjdWExIikuaXNFbXB0eSgpKSB7DQogICAgICBjb250YWluZXIuc2V0KCJPRENVQTEiLCBtYXAuZ2V0KCJjdWExIikpDQogICAgfSBlbHNlIGlmIChjaWRtYXNFeGlzdCkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0RDVUExIiwgU3RyaW5nLnZhbHVlT2YocmVjb3JkLmdldCgiT1BDVUExIikpKQ0KICAgIH0NCiAgICBpZiAoIW1hcC5nZXQoImN1YTIiKS5pc0VtcHR5KCkpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9EQ1VBMiIsIG1hcC5nZXQoImN1YTIiKSkNCiAgICB9IGVsc2UgaWYgKGNpZG1hc0V4aXN0KSB7DQogICAgICBjb250YWluZXIuc2V0KCJPRENVQTIiLCBTdHJpbmcudmFsdWVPZihyZWNvcmQuZ2V0KCJPUENVQTIiKSkpDQogICAgfQ0KICAgIGlmICghbWFwLmdldCgiY3VhMyIpLmlzRW1wdHkoKSkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0RDVUEzIiwgbWFwLmdldCgiY3VhMyIpKQ0KICAgIH0gZWxzZSBpZiAoY2lkbWFzRXhpc3QpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9EQ1VBMyIsIFN0cmluZy52YWx1ZU9mKHJlY29yZC5nZXQoIk9QQ1VBMyIpKSkNCiAgICB9DQogICAgaWYgKCFtYXAuZ2V0KCJjdWE0IikuaXNFbXB0eSgpKSB7DQogICAgICBjb250YWluZXIuc2V0KCJPRENVQTQiLCBtYXAuZ2V0KCJjdWE0IikpDQogICAgfSBlbHNlIGlmIChjaWRtYXNFeGlzdCkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0RDVUE0IiwgU3RyaW5nLnZhbHVlT2YocmVjb3JkLmdldCgiT1BDVUE0IikpKQ0KICAgIH0NCiAgICBpZiAoIW1hcC5nZXQoInBvbm8iKS5pc0VtcHR5KCkpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9EUE9OTyIsIG1hcC5nZXQoInBvbm8iKSkNCiAgICB9IGVsc2UgaWYgKGNpZG1hc0V4aXN0KSB7DQogICAgICBjb250YWluZXIuc2V0KCJPRFBPTk8iLCBTdHJpbmcudmFsdWVPZihyZWNvcmQuZ2V0KCJPUFBPTk8iKSkpDQogICAgfQ0KICAgIGlmICghbWFwLmdldCgidG93biIpLmlzRW1wdHkoKSkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0RUT1dOIiwgbWFwLmdldCgidG93biIpKQ0KICAgIH0gZWxzZSBpZiAoY2lkbWFzRXhpc3QpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9EVE9XTiIsIFN0cmluZy52YWx1ZU9mKHJlY29yZC5nZXQoIk9QVE9XTiIpKSkNCiAgICB9DQogICAgaWYgKCFtYXAuZ2V0KCJlY2FyIikuaXNFbXB0eSgpKSB7DQogICAgICBjb250YWluZXIuc2V0KCJPREVDQVIiLCBtYXAuZ2V0KCJlY2FyIikpDQogICAgfSBlbHNlIGlmIChjaWRtYXNFeGlzdCkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0RFQ0FSIiwgU3RyaW5nLnZhbHVlT2YocmVjb3JkLmdldCgiT1BFQ0FSIikpKQ0KICAgIH0NCiAgICBpZiAoIW1hcC5nZXQoImNzY2QiKS5pc0VtcHR5KCkpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9EQ1NDRCIsIG1hcC5nZXQoImNzY2QiKSkNCiAgICB9IGVsc2UgaWYgKGNpZG1hc0V4aXN0KSB7DQogICAgICBjb250YWluZXIuc2V0KCJPRENTQ0QiLCBTdHJpbmcudmFsdWVPZihyZWNvcmQuZ2V0KCJPUENTQ0QiKSkpDQogICAgfQ0KICAgIGlmICghbWFwLmdldCgicGhubyIpLmlzRW1wdHkoKSkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0RQSE5PIiwgbWFwLmdldCgicGhubyIpKQ0KICAgIH0gZWxzZSBpZiAoY2lkbWFzRXhpc3QpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9EUEhOTyIsIFN0cmluZy52YWx1ZU9mKHJlY29yZC5nZXQoIk9QUEhOTyIpKSkNCiAgICB9DQogICAgaWYgKCFtYXAuZ2V0KCJ0Zm5vIikuaXNFbXB0eSgpKSB7DQogICAgICBjb250YWluZXIuc2V0KCJPRFRGTk8iLCBtYXAuZ2V0KCJ0Zm5vIikpDQogICAgfSBlbHNlIGlmIChjaWRtYXNFeGlzdCkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0RURk5PIiwgU3RyaW5nLnZhbHVlT2YocmVjb3JkLmdldCgiT1BURk5PIikpKQ0KICAgIH0NCiAgICBpZiAoIW1hcC5nZXQoInlyZWYiKS5pc0VtcHR5KCkpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9EWVJFRiIsIG1hcC5nZXQoInlyZWYiKSkNCiAgICB9IGVsc2UgaWYgKGNpZG1hc0V4aXN0KSB7DQogICAgICBjb250YWluZXIuc2V0KCJPRFlSRUYiLCBTdHJpbmcudmFsdWVPZihyZWNvcmQuZ2V0KCJPUFlSRUYiKSkpDQogICAgfQ0KICAgIGlmICghbWFwLmdldCgidnJubyIpLmlzRW1wdHkoKSkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0RWUk5PIiwgbWFwLmdldCgidnJubyIpKQ0KICAgIH0gZWxzZSBpZiAoY2lkbWFzRXhpc3QpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9EVlJOTyIsIFN0cmluZy52YWx1ZU9mKHJlY29yZC5nZXQoIk9QVlJOTyIpKSkNCiAgICB9DQogICAgaWYgKCFtYXAuZ2V0KCJzcGxlIikuaXNFbXB0eSgpKSB7DQogICAgICBjb250YWluZXIuc2V0KCJPRFNQTEUiLCBtYXAuZ2V0KCJzcGxlIikpDQogICAgfSBlbHNlIGlmIChjaWRtYXNFeGlzdCkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0RTUExFIiwgU3RyaW5nLnZhbHVlT2YocmVjb3JkLmdldCgiT1BTUExFIikpKQ0KICAgIH0NCiAgICBpZiAoIW1hcC5nZXQoImhhZmUiKS5pc0VtcHR5KCkpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9ESEFGRSIsIG1hcC5nZXQoImhhZmUiKSkNCiAgICB9IGVsc2UgaWYgKGNpZG1hc0V4aXN0KSB7DQogICAgICBjb250YWluZXIuc2V0KCJPREhBRkUiLCBTdHJpbmcudmFsdWVPZihyZWNvcmQuZ2V0KCJPUEhBRkUiKSkpDQogICAgfQ0KICAgIGlmICghbWFwLmdldCgicmFzbiIpLmlzRW1wdHkoKSkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0RSQVNOIiwgbWFwLmdldCgiaGFmZSIpKQ0KICAgIH0gZWxzZSBpZiAoY2lkbWFzRXhpc3QpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9EUkFTTiIsIFN0cmluZy52YWx1ZU9mKHJlY29yZC5nZXQoIk9QUkFTTiIpKSkNCiAgICB9ICAgIA0KICAgIGlmICghbWFwLmdldCgiZWRlcyIpLmlzRW1wdHkoKSkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0RFREVTIiwgbWFwLmdldCgiZWRlcyIpKQ0KICAgIH0gZWxzZSBpZiAoY2lkbWFzRXhpc3QpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9ERURFUyIsIFN0cmluZy52YWx1ZU9mKHJlY29yZC5nZXQoIk9QRURFUyIpKSkNCiAgICB9ICAgIA0KICAgIGlmICghbWFwLmdldCgiZGxzcCIpLmlzRW1wdHkoKSkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0RETFNQIiwgbWFwLmdldCgiZGxzcCIpKQ0KICAgIH0gIA0KICAgIGlmICghbWFwLmdldCgiZHN0eCIpLmlzRW1wdHkoKSkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0REU1RYIiwgbWFwLmdldCgiZHN0eCIpKQ0KICAgIH0gICANCiAgICBpZiAoIW1hcC5nZXQoIm1vZGwiKS5pc0VtcHR5KCkpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9ETU9ETCIsIG1hcC5nZXQoIm1vZGwiKSkNCiAgICB9IGVsc2UgaWYgKGNpZG1hc0V4aXN0KSB7DQogICAgICBjb250YWluZXIuc2V0KCJPRE1PREwiLCBTdHJpbmcudmFsdWVPZihyZWNvcmQuZ2V0KCJPUE1PREwiKSkpDQogICAgfSAgICANCiAgICBpZiAoIW1hcC5nZXQoInRlZGwiKS5pc0VtcHR5KCkpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9EVEVETCIsIG1hcC5nZXQoInRlbCIpKQ0KICAgIH0gZWxzZSBpZiAoY2lkbWFzRXhpc3QpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9EVEVETCIsIFN0cmluZy52YWx1ZU9mKHJlY29yZC5nZXQoIk9QVEVETCIpKSkNCiAgICB9IA0KICAgIGlmICghbWFwLmdldCgidGVsMiIpLmlzRW1wdHkoKSkgew0KICAgICAgY29udGFpbmVyLnNldCgiT0RURUwyIiwgbWFwLmdldCgidGVsMiIpKQ0KICAgIH0gZWxzZSBpZiAoY2lkbWFzRXhpc3QpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9EVEVMMiIsIFN0cmluZy52YWx1ZU9mKHJlY29yZC5nZXQoIk9QVEVMMiIpKSkNCiAgICB9ICANCiAgICANCiAgICBjb250YWluZXIuc2V0KCJPRFJHRFQiLCB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwiY3VycmVudERhdGVZOEFzSW50IikpDQogICAgY29udGFpbmVyLnNldCgiT0RSR1RNIiwgdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsImN1cnJlbnRUaW1lQXNJbnQiKSkNCiAgICBjb250YWluZXIuc2V0KCJPRExNRFQiLCB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwiY3VycmVudERhdGVZOEFzSW50IikpDQogICAgY29udGFpbmVyLnNldCgiT0RDSE5PIiwgMSkNCiAgICBjb250YWluZXIuc2V0KCJPRENISUQiLCBjaGlkKQ0KICAgIA0KICAgIHF1ZXJ5Lmluc2VydChjb250YWluZXIpDQogIH0NCiAgDQogIC8qKg0KICAqIFJlY2hlcmNoZSBkZSBsJ2FkcmVzc2UgY2xpZW50IHBvdXIgcsOpY3Vww6lyZXIgbGVzIGRvbm7DqWVzIGRlIGxhZHJlc3NlIGNsaWVudCBsb3JzIGQndW5lIGNyw6lhdGlvbiBkYW5zIE9PQURSRS4NCiAgKi8NCiAgcHJpdmF0ZSBPcHRpb25hbDxEQkNvbnRhaW5lcj4gc2VhcmNoQ3VzdG9tZXJBZGRyZXNzKFN0cmluZyBhZHJ0KSB7DQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiT0NVU0FEIikNCiAgICAuaW5kZXgoIjAwIikNCiAgICAuc2VsZWN0aW9uKCJPUENVTk0iLCAiT1BDVUExIiwgIk9QQ1VBMiIsICJPUENVQTMiLCAiT1BDVUE0IiwgIk9QUE9OTyIsICJPUFRPV04iLCAiT1BFQ0FSIiwgIk9QQ1NDRCIsICJPUFBITk8iLCAiT1BURk5PIiwgIk9QWVJFRiIsICJPUFZSTk8iLCAiT1BTUExFIiwgIk9QSEFGRSIsDQogICAgICAgICAgICAgICAgIk9QUkFTTiIsICJPUEVERVMiLCAiT1BNT0RMIiwgIk9QVEVETCIsICJPUFRFTDIiKQ0KICAgIC5idWlsZCgpDQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkNCiAgICANCiAgICBjb250YWluZXIuc2V0KCJPUENPTk8iLCBjb25vKQ0KICAgIGNvbnRhaW5lci5zZXQoIk9QQ1VOTyIsIGN1bm8pDQogICAgY29udGFpbmVyLnNldCgiT1BBRFJUIiwgdXRpbGl0eS5jYWxsKCJOdW1iZXJVdGlsIiwicGFyc2VTdHJpbmdUb0ludGVnZXIiLCBhZHJ0KSkNCiAgICBjb250YWluZXIuc2V0KCJPUEFESUQiLCBtYXAuZ2V0KCJhZGlkIikpDQogICAgDQogICAgYm9vbGVhbiBmb3VuZCA9IHF1ZXJ5LnJlYWQoY29udGFpbmVyKQ0KICAgIA0KICAgIGlmIChmb3VuZCkgew0KICAgICAgcmV0dXJuIE9wdGlvbmFsLm9mKGNvbnRhaW5lcikNCiAgICB9IGVsc2Ugew0KICAgICAgcmV0dXJuIE9wdGlvbmFsLmVtcHR5KCkNCiAgICB9DQogIH0NCiAgDQogIC8qKg0KICAqIE1pc2Ugw6Agam91ciBkZSBsJ0FESUQgZGFucyBPT0hFQUQgcydpbCBlc3QgZGlmZsOpcmVudCBkZSBjZWx1aSByZW50csOpIGVuIGVudHLDqWUgZGUgbCdBUEkuDQogICovDQogIHByaXZhdGUgdm9pZCB1cGRhdEFkaWRJbk9PSEVBRCgpIHsNCiAgICBpZiAoYWRpZE9PSEVBRC5pc0VtcHR5KCkgfHwgIWFkaWRPT0hFQUQuZXF1YWxzKG1hcC5nZXQoImFkaWQiKSkpIHsNCiAgICAgIGFkaWRPT0hFQUQgPSBtYXAuZ2V0KCJhZGlkIikNCiAgICAgIA0KICAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiT09IRUFEIikNCiAgICAgICAgLmluZGV4KCIwMCIpDQogICAgICAgIC5idWlsZCgpDQogICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgICAgY29udGFpbmVyLnNldCgiT0FDT05PIiwgY29ubykNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9BT1JOTyIsIG9ybm8pDQogICAgICANCiAgICAgIENsb3N1cmU8Pz4gdXBkYXRlQ2FsbEJhY2sgPSB7IExvY2tlZFJlc3VsdCBsb2NrZWRSZXN1bHQgLT4NCiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0FBRElEIiwgYWRpZE9PSEVBRCkNCiAgICAgICAgaW50IGNobm8gPSBsb2NrZWRSZXN1bHQuZ2V0KCJPQUNITk8iKQ0KICAgICAgICBjaG5vKysNCiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0FMTURUIiwgdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsImN1cnJlbnREYXRlWThBc0ludCIpKQ0KICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPQUNITk8iLCBjaG5vKQ0KICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPQUNISUQiLCBjaGlkKQ0KICANCiAgICAgICAgbG9ja2VkUmVzdWx0LnVwZGF0ZSgpDQogICAgICB9DQogICAgICANCiAgICAgIHF1ZXJ5LnJlYWRMb2NrKGNvbnRhaW5lciwgdXBkYXRlQ2FsbEJhY2spDQogICAgfQ0KICB9DQoNCn0="}}}